# 44

## 解答

```
uchiyama@X280:~/work/knock/shellgei160/qdata/44$ cat diary.txt | sed -zE 's/シ\n?ェ\n?ル\n?ス\n?ク\n?リ\n?プ\n?ト/@&@/g' | sed 's/.*@.*/& @/' | sed 's/@\(.\)/\1/g'
今日もシェルスクリプトを書いた。その @
後、ストロング系のチューハイを3本飲
み、少し休憩した後に人の書いたシェル @
スクリプトを手直しした。体内にアル @
コールがまわり、意識が朦朧とする中、
シェルスクリプトかわいいよシェルスク @
リプトという謎ワードが前頭葉をぐるぐ @
るして止まらなくなったので、もうだめ
だと思って寝た。
```

「シェルスクリプト」が 3 行以上にまたがる場合にも対応する。
```
uchiyama@X280:~/work/knock/shellgei160/qdata/44$ cat diary.txt | sed -zE 's/シ\n?ェ\n?ル\n?ス\n?ク\n?リ\n?プ\n?ト/<&>/g' | awk '{x+=split($0,a,"<")-1}{print $0,(x?"@":"")}{x-=split($0,a,">")-1}' | tr -d '<>'
今日もシェルスクリプトを書いた。その @
後、ストロング系のチューハイを3本飲
み、少し休憩した後に人の書いたシェル @
スクリプトを手直しした。体内にアル @
コールがまわり、意識が朦朧とする中、
シェルスクリプトかわいいよシェルスク @
リプトという謎ワードが前頭葉をぐるぐ @
るして止まらなくなったので、もうだめ
だと思って寝た。

uchiyama@X280:~/work/knock/shellgei160/qdata/44$ cat diary.txt | tr -d '\n' | sed -z 's/.../&\n/g' | sed -zE 's/シ\n?ェ\n?ル\n?ス\n?ク\n?リ\n?プ\n?ト/<&>/g' | awk '{x+=split($0,a,"<")-1}{print $0,(x?"@":"")}{x-=split($0,a,">")-1}' | tr
-d '<>'
今日も
シェル @
スクリ @
プトを @
書いた
。その
後、ス
トロン
グ系の
チュー
ハイを
3本飲
み、少
し休憩
した後
に人の
書いた
シェル @
スクリ @
プトを @
手直し
した。
体内に
アルコ
ールが
まわり
、意識
が朦朧
とする
中、シ @
ェルス @
クリプ @
トかわ @
いいよ
シェル @
スクリ @
プトと @
いう謎
ワード
が前頭
葉をぐ
るぐる
して止
まらな
くなっ
たので
、もう
だめだ
と思っ
て寝た
。
```

## 考察

- sed のアドレス指定 (`sed '/%/s/$/ @/'` の部分)
